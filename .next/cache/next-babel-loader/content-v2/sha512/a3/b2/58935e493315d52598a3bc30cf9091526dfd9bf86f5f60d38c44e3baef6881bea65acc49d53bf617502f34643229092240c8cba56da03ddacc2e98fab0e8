{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"C:/Users/thetn/OneDrive/Desktop/ecommpj/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/thetn/OneDrive/Desktop/ecommpj/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\thetn\\\\OneDrive\\\\Desktop\\\\ecommpj\\\\components\\\\Layout.js\",\n    _s = $RefreshSig$();\n\n/* next.js head */\nimport Head from 'next/head';\nimport React, { useContext, useEffect } from 'react';\nimport AppBar from '@material-ui/core/AppBar';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Link from '@material-ui/core/Link';\nimport NextLink from 'next/link';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport Box from '@material-ui/core/Box';\nimport { theme } from '../utils/styles';\nimport { siteName } from '../utils/config';\nimport { Badge, CircularProgress } from '@material-ui/core';\nimport { useStyles } from '../utils/styles';\nimport { Store } from './Store';\nimport { CART_RETRIEVE_REQUEST, CART_RETRIEVE_SUCCESS } from '../utils/constants';\nimport getCommerce from '../utils/commerce';\nexport default function Layout(_ref) {\n  _s();\n\n  var children = _ref.children,\n      commercePublicKey = _ref.commercePublicKey,\n      _ref$title = _ref.title,\n      title = _ref$title === void 0 ? 'Coolshop' : _ref$title;\n  var classes = useStyles();\n\n  var _useContext = useContext(Store),\n      state = _useContext.state,\n      dispatch = _useContext.dispatch;\n\n  var cart = state.cart;\n  useEffect(function () {\n    var fetchCart = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var commerce, cartData;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                commerce = getCommerce(commercePublicKey);\n                dispatch({\n                  type: CART_RETRIEVE_REQUEST\n                });\n                _context.next = 4;\n                return commerce.cart.retrieve();\n\n              case 4:\n                cartData = _context.sent;\n                dispatch({\n                  type: CART_RETRIEVE_SUCCESS,\n                  payload: cartData\n                });\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function fetchCart() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    fetchCart();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      children: [/*#__PURE__*/_jsxDEV(\"meta\", {\n        charSet: \"utf-8\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"\".concat(title, \" - \").concat(siteName)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"link\", {\n        rel: \"icon\",\n        href: \"/favicon.ico\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        name: \"viewport\",\n        content: \"width=device-width, initial-scale=1, shrink-to-fit=no\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ThemeProvider, {\n      theme: theme,\n      children: [/*#__PURE__*/_jsxDEV(CssBaseline, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AppBar, {\n        position: \"static\",\n        color: \"default\",\n        elevation: 0,\n        className: classes.appBar,\n        children: /*#__PURE__*/_jsxDEV(Toolbar, {\n          className: classes.toolbar,\n          children: [/*#__PURE__*/_jsxDEV(NextLink, {\n            href: \"/\",\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              variant: \"h6\",\n              color: \"inherit\",\n              noWrap: true,\n              href: \"/\",\n              className: classes.toolbarTitle,\n              children: siteName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n            children: /*#__PURE__*/_jsxDEV(NextLink, {\n              href: \"/cart\",\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                variant: \"button\",\n                color: \"textPrimary\",\n                href: \"/cart\",\n                className: classes.link,\n                children: cart.loading ? /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 86,\n                  columnNumber: 21\n                }, this) : cart.data.total_items > 0 ? /*#__PURE__*/_jsxDEV(Badge, {\n                  badgeContent: cart.data.total_items,\n                  color: \"primary\",\n                  children: \"Cart\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 88,\n                  columnNumber: 21\n                }, this) : 'Cart'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 79,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Container, {\n        component: \"main\",\n        className: classes.main,\n        children: children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Container, {\n        maxWidth: \"md\",\n        component: \"footer\",\n        children: /*#__PURE__*/_jsxDEV(Box, {\n          mt: 5,\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            color: \"textSecondary\",\n            align: \"center\",\n            children: ['© ', siteName, \" 2021\", '.']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Layout, \"4ykUCZ+xprbfC/CLqNFyN7oxwKA=\", false, function () {\n  return [useStyles];\n});\n\n_c = Layout;\n\nvar _c;\n\n$RefreshReg$(_c, \"Layout\");","map":{"version":3,"sources":["C:/Users/thetn/OneDrive/Desktop/ecommpj/components/Layout.js"],"names":["Head","React","useContext","useEffect","AppBar","CssBaseline","Toolbar","Typography","Link","NextLink","ThemeProvider","Container","Box","theme","siteName","Badge","CircularProgress","useStyles","Store","CART_RETRIEVE_REQUEST","CART_RETRIEVE_SUCCESS","getCommerce","Layout","children","commercePublicKey","title","classes","state","dispatch","cart","fetchCart","commerce","type","retrieve","cartData","payload","appBar","toolbar","toolbarTitle","link","loading","data","total_items","main"],"mappings":"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","sourcesContent":["/* next.js head */\nimport Head from 'next/head';\nimport React, { useContext, useEffect } from 'react';\nimport AppBar from '@material-ui/core/AppBar';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Link from '@material-ui/core/Link';\nimport NextLink from 'next/link';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport Box from '@material-ui/core/Box';\nimport { theme } from '../utils/styles';\nimport { siteName } from '../utils/config';\nimport { Badge, CircularProgress } from '@material-ui/core';\nimport { useStyles } from '../utils/styles';\nimport { Store } from './Store';\nimport {\n  CART_RETRIEVE_REQUEST,\n  CART_RETRIEVE_SUCCESS,\n} from '../utils/constants';\nimport getCommerce from '../utils/commerce';\n\nexport default function Layout({\n  children,\n  commercePublicKey,\n  title = 'Coolshop',\n}) {\n  const classes = useStyles();\n\n  const { state, dispatch } = useContext(Store);\n  const { cart } = state;\n\n  useEffect(() => {\n    const fetchCart = async () => {\n      const commerce = getCommerce(commercePublicKey);\n      dispatch({ type: CART_RETRIEVE_REQUEST });\n      const cartData = await commerce.cart.retrieve();\n      dispatch({ type: CART_RETRIEVE_SUCCESS, payload: cartData });\n    };\n    fetchCart();\n  }, []);\n\n  return (\n    <React.Fragment>\n      <Head>\n        <meta charSet=\"utf-8\" />\n        <title>{`${title} - ${siteName}`}</title>\n        <link rel=\"icon\" href=\"/favicon.ico\" />\n        <meta\n          name=\"viewport\"\n          content=\"width=device-width, initial-scale=1, shrink-to-fit=no\"\n        />\n      </Head>\n      <ThemeProvider theme={theme}>\n        <CssBaseline />\n\n        <AppBar\n          position=\"static\"\n          color=\"default\"\n          elevation={0}\n          className={classes.appBar}\n        >\n          <Toolbar className={classes.toolbar}>\n            <NextLink href=\"/\">\n              <Link\n                variant=\"h6\"\n                color=\"inherit\"\n                noWrap\n                href=\"/\"\n                className={classes.toolbarTitle}\n              >\n                {siteName}\n              </Link>\n            </NextLink>\n\n            <nav>\n              <NextLink href=\"/cart\">\n                <Link\n                  variant=\"button\"\n                  color=\"textPrimary\"\n                  href=\"/cart\"\n                  className={classes.link}\n                >\n                  {cart.loading ? (\n                    <CircularProgress />\n                  ) : cart.data.total_items > 0 ? (\n                    <Badge badgeContent={cart.data.total_items} color=\"primary\">\n                      Cart\n                    </Badge>\n                  ) : (\n                    'Cart'\n                  )}\n                </Link>\n              </NextLink>\n            </nav>\n          </Toolbar>\n        </AppBar>\n        {/* Hero unit */}\n        <Container component=\"main\" className={classes.main}>\n          {children}\n        </Container>\n        {/* End hero unit */}\n        <Container maxWidth=\"md\" component=\"footer\">\n          <Box mt={5}>\n            <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n              {'© '}\n              {siteName} 2021\n              {'.'}\n            </Typography>\n          </Box>\n        </Container>\n        {/* End footer */}\n      </ThemeProvider>\n    </React.Fragment>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}