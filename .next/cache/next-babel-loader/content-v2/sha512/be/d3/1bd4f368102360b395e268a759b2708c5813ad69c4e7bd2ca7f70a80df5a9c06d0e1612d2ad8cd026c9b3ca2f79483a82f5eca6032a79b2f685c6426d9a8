{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"C:/Users/thetn/OneDrive/Desktop/ecommpj/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/thetn/OneDrive/Desktop/ecommpj/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\thetn\\\\OneDrive\\\\Desktop\\\\ecommpj\\\\components\\\\Layout.js\",\n    _s = $RefreshSig$();\n\n/* next.js head */\nimport Head from 'next/head';\nimport React, { useContext, useEffect } from 'react';\nimport AppBar from '@material-ui/core/AppBar';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Link from '@material-ui/core/Link';\nimport NextLink from 'next/link';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport Box from '@material-ui/core/Box';\nimport { theme } from '../utils/styles';\nimport { siteName } from '../utils/config';\nimport { Badge, CircularProgress } from '@material-ui/core';\nimport { useStyles } from '../utils/styles';\nimport { Store } from './Store';\nimport { CART_RETRIEVE_REQUEST, CART_RETRIEVE_SUCCESS } from '../utils/constants';\nimport getCommerce from '../utils/commerce';\nexport default function Layout(_ref) {\n  _s();\n\n  var children = _ref.children,\n      commercePublicKey = _ref.commercePublicKey,\n      _ref$title = _ref.title,\n      title = _ref$title === void 0 ? 'SHANMALL' : _ref$title;\n  var classes = useStyles();\n\n  var _useContext = useContext(Store),\n      state = _useContext.state,\n      dispatch = _useContext.dispatch;\n\n  var cart = state.cart;\n  useEffect(function () {\n    var fetchCart = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var commerce, cartData;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                commerce = getCommerce(commercePublicKey);\n                dispatch({\n                  type: CART_RETRIEVE_REQUEST\n                });\n                _context.next = 4;\n                return commerce.cart.retrieve();\n\n              case 4:\n                cartData = _context.sent;\n                dispatch({\n                  type: CART_RETRIEVE_SUCCESS,\n                  payload: cartData\n                });\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function fetchCart() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    fetchCart();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      children: [/*#__PURE__*/_jsxDEV(\"meta\", {\n        charSet: \"utf-8\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"\".concat(title, \" - \").concat(siteName)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"link\", {\n        rel: \"icon\",\n        href: \"/favicon.ico\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        name: \"viewport\",\n        content: \"width=device-width, initial-scale=1, shrink-to-fit=no\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(ThemeProvider, {\n      theme: theme,\n      children: [/*#__PURE__*/_jsxDEV(CssBaseline, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(AppBar, {\n        position: \"static\",\n        color: \"default\",\n        elevation: 0,\n        className: classes.appBar,\n        children: /*#__PURE__*/_jsxDEV(Toolbar, {\n          className: classes.toolbar,\n          children: [/*#__PURE__*/_jsxDEV(NextLink, {\n            href: \"/\",\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              variant: \"h6\",\n              color: \"inherit\",\n              noWrap: true,\n              href: \"/\",\n              className: classes.toolbarTitle,\n              children: siteName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 51,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n            children: /*#__PURE__*/_jsxDEV(NextLink, {\n              href: \"/cart\",\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                variant: \"button\",\n                color: \"textPrimary\",\n                href: \"/cart\",\n                className: classes.link,\n                children: cart.loading ? /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 60,\n                  columnNumber: 11\n                }, this) : cart.data.total_items > 0 ? /*#__PURE__*/_jsxDEV(Badge, {\n                  badgeContent: cart.data.total_items,\n                  color: \"primary\",\n                  children: \"Cart\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 62,\n                  columnNumber: 11\n                }, this) : 'Cart'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 58,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Container, {\n        component: \"main\",\n        className: classes.main,\n        children: children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Container, {\n        maxWidth: \"md\",\n        component: \"footer\",\n        children: /*#__PURE__*/_jsxDEV(Box, {\n          mt: 5,\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            color: \"textSecondary\",\n            align: \"center\",\n            children: ['© ', siteName, \" 2021\", '.']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 3\n  }, this);\n}\n\n_s(Layout, \"4ykUCZ+xprbfC/CLqNFyN7oxwKA=\", false, function () {\n  return [useStyles];\n});\n\n_c = Layout;\n\nvar _c;\n\n$RefreshReg$(_c, \"Layout\");","map":{"version":3,"sources":["C:/Users/thetn/OneDrive/Desktop/ecommpj/components/Layout.js"],"names":["Head","React","useContext","useEffect","AppBar","CssBaseline","Toolbar","Typography","Link","NextLink","ThemeProvider","Container","Box","theme","siteName","Badge","CircularProgress","useStyles","Store","CART_RETRIEVE_REQUEST","CART_RETRIEVE_SUCCESS","getCommerce","Layout","children","commercePublicKey","title","classes","state","dispatch","cart","fetchCart","commerce","type","retrieve","cartData","payload","appBar","toolbar","toolbarTitle","link","loading","data","total_items","main"],"mappings":"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","sourcesContent":["/* next.js head */\nimport Head from 'next/head';\nimport React, { useContext, useEffect } from 'react';\nimport AppBar from '@material-ui/core/AppBar';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Link from '@material-ui/core/Link';\nimport NextLink from 'next/link';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport Box from '@material-ui/core/Box';\nimport { theme } from '../utils/styles';\nimport { siteName } from '../utils/config';\nimport { Badge, CircularProgress } from '@material-ui/core';\nimport { useStyles } from '../utils/styles';\nimport { Store } from './Store';\nimport { CART_RETRIEVE_REQUEST, CART_RETRIEVE_SUCCESS } from '../utils/constants';\nimport getCommerce from '../utils/commerce';\n\nexport default function Layout({ children, commercePublicKey, title = 'SHANMALL' }) {\n\tconst classes = useStyles();\n\n\tconst { state, dispatch } = useContext(Store);\n\tconst { cart } = state;\n\n\tuseEffect(() => {\n\t\tconst fetchCart = async () => {\n\t\t\tconst commerce = getCommerce(commercePublicKey);\n\t\t\tdispatch({ type: CART_RETRIEVE_REQUEST });\n\t\t\tconst cartData = await commerce.cart.retrieve();\n\t\t\tdispatch({ type: CART_RETRIEVE_SUCCESS, payload: cartData });\n\t\t};\n\t\tfetchCart();\n\t}, []);\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<Head>\n\t\t\t\t<meta charSet=\"utf-8\" />\n\t\t\t\t<title>{`${title} - ${siteName}`}</title>\n\t\t\t\t<link rel=\"icon\" href=\"/favicon.ico\" />\n\t\t\t\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1, shrink-to-fit=no\" />\n\t\t\t</Head>\n\t\t\t<ThemeProvider theme={theme}>\n\t\t\t\t<CssBaseline />\n\n\t\t\t\t<AppBar position=\"static\" color=\"default\" elevation={0} className={classes.appBar}>\n\t\t\t\t\t<Toolbar className={classes.toolbar}>\n\t\t\t\t\t\t<NextLink href=\"/\">\n\t\t\t\t\t\t\t<Link variant=\"h6\" color=\"inherit\" noWrap href=\"/\" className={classes.toolbarTitle}>\n\t\t\t\t\t\t\t\t{siteName}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</NextLink>\n\n\t\t\t\t\t\t<nav>\n\t\t\t\t\t\t\t<NextLink href=\"/cart\">\n\t\t\t\t\t\t\t\t<Link variant=\"button\" color=\"textPrimary\" href=\"/cart\" className={classes.link}>\n\t\t\t\t\t\t\t\t\t{cart.loading ? (\n\t\t\t\t\t\t\t\t\t\t<CircularProgress />\n\t\t\t\t\t\t\t\t\t) : cart.data.total_items > 0 ? (\n\t\t\t\t\t\t\t\t\t\t<Badge badgeContent={cart.data.total_items} color=\"primary\">\n\t\t\t\t\t\t\t\t\t\t\tCart\n\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t'Cart'\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</NextLink>\n\t\t\t\t\t\t</nav>\n\t\t\t\t\t</Toolbar>\n\t\t\t\t</AppBar>\n\t\t\t\t{/* Hero unit */}\n\t\t\t\t<Container component=\"main\" className={classes.main}>\n\t\t\t\t\t{children}\n\t\t\t\t</Container>\n\t\t\t\t{/* End hero unit */}\n\t\t\t\t<Container maxWidth=\"md\" component=\"footer\">\n\t\t\t\t\t<Box mt={5}>\n\t\t\t\t\t\t<Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n\t\t\t\t\t\t\t{'© '}\n\t\t\t\t\t\t\t{siteName} 2021\n\t\t\t\t\t\t\t{'.'}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</Box>\n\t\t\t\t</Container>\n\t\t\t\t{/* End footer */}\n\t\t\t</ThemeProvider>\n\t\t</React.Fragment>\n\t);\n}\n"]},"metadata":{},"sourceType":"module"}