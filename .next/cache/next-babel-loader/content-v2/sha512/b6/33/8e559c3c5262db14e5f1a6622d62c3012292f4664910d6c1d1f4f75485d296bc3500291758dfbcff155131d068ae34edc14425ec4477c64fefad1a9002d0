{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport _toConsumableArray from \"C:/Users/thetn/OneDrive/Desktop/ecommpj/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"C:/Users/thetn/OneDrive/Desktop/ecommpj/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/thetn/OneDrive/Desktop/ecommpj/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\thetn\\\\OneDrive\\\\Desktop\\\\ecommpj\\\\pages\\\\products\\\\[id].js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState } from 'react';\nimport { Alert } from '@material-ui/lab';\nimport getCommerce from '../../utils/commerce';\nimport { Box, Button, Card, Grid, List, ListItem, MenuItem, Select, Slide, Typography } from '@material-ui/core';\nimport { useStyles } from '../../utils/styles';\nimport Layout from '../../components/Layout';\nimport { Store } from '../../components/Store';\nimport Router from 'next/router';\nimport { CART_RETRIEVE_SUCCESS } from '../../utils/constants';\nexport var __N_SSP = true;\nexport default function Home(props) {\n  _s();\n\n  var _this = this;\n\n  var classes = useStyles();\n\n  var _useContext = useContext(Store),\n      state = _useContext.state,\n      dispatch = _useContext.dispatch;\n\n  var userInfo = state.userInfo,\n      cart = state.cart;\n\n  var _useState = useState(1),\n      quantity = _useState[0],\n      setQuantity = _useState[1];\n\n  var product = props.product;\n\n  var addToCartHandler = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var commerce, lineItem, cartData, _cartData;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              commerce = getCommerce(props.commercePublicKey);\n              lineItem = cart.data.line_items.find(function (x) {\n                return x.product_id === product.id;\n              });\n\n              if (!lineItem) {\n                _context.next = 10;\n                break;\n              }\n\n              _context.next = 5;\n              return commerce.cart.update(lineItem.id, {\n                quantity: quantity\n              });\n\n            case 5:\n              cartData = _context.sent;\n              dispatch({\n                type: CART_RETRIEVE_SUCCESS,\n                payload: cartData.cart\n              });\n              Router.push('/cart');\n              _context.next = 15;\n              break;\n\n            case 10:\n              _context.next = 12;\n              return commerce.cart.add(product.id, quantity);\n\n            case 12:\n              _cartData = _context.sent;\n              dispatch({\n                type: CART_RETRIEVE_SUCCESS,\n                payload: _cartData.cart\n              });\n              Router.push('/cart');\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function addToCartHandler() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    userInfo: userInfo,\n    title: product.name,\n    commercePublicKey: props.commercePublicKey,\n    children: /*#__PURE__*/_jsxDEV(Slide, {\n      direction: \"up\",\n      \"in\": true,\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 1,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          md: 6,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: product.media.source,\n            alt: product.name,\n            className: classes.largeImage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          md: 3,\n          xs: 12,\n          children: /*#__PURE__*/_jsxDEV(List, {\n            children: [/*#__PURE__*/_jsxDEV(ListItem, {\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                gutterBottom: true,\n                variant: \"h6\",\n                color: \"textPrimary\",\n                component: \"h1\",\n                children: product.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 69,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n              children: /*#__PURE__*/_jsxDEV(Box, {\n                dangerouslySetInnerHTML: {\n                  __html: product.description\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 79,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          md: 3,\n          xs: 12,\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            children: /*#__PURE__*/_jsxDEV(List, {\n              children: [/*#__PURE__*/_jsxDEV(ListItem, {\n                children: /*#__PURE__*/_jsxDEV(Grid, {\n                  container: true,\n                  children: [/*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 6,\n                    children: \"Price\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 90,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 6,\n                    children: product.price.formatted_with_symbol\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 93,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 89,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n                children: /*#__PURE__*/_jsxDEV(Grid, {\n                  alignItems: \"center\",\n                  container: true,\n                  children: [/*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 6,\n                    children: \"Status\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 101,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 6,\n                    children: product.quantity > 0 ? /*#__PURE__*/_jsxDEV(Alert, {\n                      icon: false,\n                      severity: \"success\",\n                      children: \"In Stock\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 106,\n                      columnNumber: 25\n                    }, this) : /*#__PURE__*/_jsxDEV(Alert, {\n                      icon: false,\n                      severity: \"error\",\n                      children: \"Unavailable\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 110,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 104,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 100,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 17\n              }, this), product.quantity > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(ListItem, {\n                  children: /*#__PURE__*/_jsxDEV(Grid, {\n                    container: true,\n                    justify: \"flex-end\",\n                    children: [/*#__PURE__*/_jsxDEV(Grid, {\n                      item: true,\n                      xs: 6,\n                      children: \"Quantity\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 121,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                      item: true,\n                      xs: 6,\n                      children: /*#__PURE__*/_jsxDEV(Select, {\n                        labelId: \"quanitity-label\",\n                        id: \"quanitity\",\n                        fullWidth: true,\n                        onChange: function onChange(e) {\n                          return setQuantity(e.target.value);\n                        },\n                        value: quantity,\n                        children: _toConsumableArray(Array(product.quantity).keys()).map(function (x) {\n                          return /*#__PURE__*/_jsxDEV(MenuItem, {\n                            value: x + 1,\n                            children: x + 1\n                          }, x + 1, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 133,\n                            columnNumber: 31\n                          }, _this);\n                        })\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 125,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 124,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 120,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 119,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n                  children: /*#__PURE__*/_jsxDEV(Button, {\n                    type: \"button\",\n                    fullWidth: true,\n                    variant: \"contained\",\n                    color: \"primary\",\n                    onClick: addToCartHandler,\n                    children: \"Add to cart\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 142,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 141,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this)\n    }, product.name, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Home, \"isxS89aL+B9U4ARN6b0BZl1a9c8=\", false, function () {\n  return [useStyles];\n});\n\n_c = Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["C:/Users/thetn/OneDrive/Desktop/ecommpj/pages/products/[id].js"],"names":["React","useContext","useState","Alert","getCommerce","Box","Button","Card","Grid","List","ListItem","MenuItem","Select","Slide","Typography","useStyles","Layout","Store","Router","CART_RETRIEVE_SUCCESS","Home","props","classes","state","dispatch","userInfo","cart","quantity","setQuantity","product","addToCartHandler","commerce","commercePublicKey","lineItem","data","line_items","find","x","product_id","id","update","cartData","type","payload","push","add","name","media","source","largeImage","__html","description","price","formatted_with_symbol","e","target","value","Array","keys","map"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from 'react';\nimport { Alert } from '@material-ui/lab';\nimport getCommerce from '../../utils/commerce';\n\nimport {\n  Box,\n  Button,\n  Card,\n  Grid,\n  List,\n  ListItem,\n  MenuItem,\n  Select,\n  Slide,\n  Typography,\n} from '@material-ui/core';\n\nimport { useStyles } from '../../utils/styles';\n\nimport Layout from '../../components/Layout';\nimport { Store } from '../../components/Store';\nimport Router from 'next/router';\nimport { CART_RETRIEVE_SUCCESS } from '../../utils/constants';\n\nexport default function Home(props) {\n  const classes = useStyles();\n\n  const { state, dispatch } = useContext(Store);\n  const { userInfo, cart } = state;\n\n  const [quantity, setQuantity] = useState(1);\n  const { product } = props;\n  const addToCartHandler = async () => {\n    const commerce = getCommerce(props.commercePublicKey);\n    const lineItem = cart.data.line_items.find(\n      (x) => x.product_id === product.id\n    );\n    if (lineItem) {\n      const cartData = await commerce.cart.update(lineItem.id, {\n        quantity: quantity,\n      });\n      dispatch({ type: CART_RETRIEVE_SUCCESS, payload: cartData.cart });\n      Router.push('/cart');\n    } else {\n      const cartData = await commerce.cart.add(product.id, quantity);\n      dispatch({ type: CART_RETRIEVE_SUCCESS, payload: cartData.cart });\n      Router.push('/cart');\n    }\n  };\n\n  return (\n    <Layout\n      userInfo={userInfo}\n      title={product.name}\n      commercePublicKey={props.commercePublicKey}\n    >\n      <Slide key={product.name} direction=\"up\" in={true}>\n        <Grid container spacing={1}>\n          <Grid item md={6}>\n            <img\n              src={product.media.source}\n              alt={product.name}\n              className={classes.largeImage}\n            />\n          </Grid>\n          <Grid item md={3} xs={12}>\n            <List>\n              <ListItem>\n                <Typography\n                  gutterBottom\n                  variant=\"h6\"\n                  color=\"textPrimary\"\n                  component=\"h1\"\n                >\n                  {product.name}\n                </Typography>\n              </ListItem>\n              <ListItem>\n                <Box\n                  dangerouslySetInnerHTML={{ __html: product.description }}\n                ></Box>\n              </ListItem>\n            </List>\n          </Grid>\n          <Grid item md={3} xs={12}>\n            <Card>\n              <List>\n                <ListItem>\n                  <Grid container>\n                    <Grid item xs={6}>\n                      Price\n                    </Grid>\n                    <Grid item xs={6}>\n                      {product.price.formatted_with_symbol}\n                    </Grid>\n                  </Grid>\n                </ListItem>\n\n                <ListItem>\n                  <Grid alignItems=\"center\" container>\n                    <Grid item xs={6}>\n                      Status\n                    </Grid>\n                    <Grid item xs={6}>\n                      {product.quantity > 0 ? (\n                        <Alert icon={false} severity=\"success\">\n                          In Stock\n                        </Alert>\n                      ) : (\n                        <Alert icon={false} severity=\"error\">\n                          Unavailable\n                        </Alert>\n                      )}\n                    </Grid>\n                  </Grid>\n                </ListItem>\n                {product.quantity > 0 && (\n                  <>\n                    <ListItem>\n                      <Grid container justify=\"flex-end\">\n                        <Grid item xs={6}>\n                          Quantity\n                        </Grid>\n                        <Grid item xs={6}>\n                          <Select\n                            labelId=\"quanitity-label\"\n                            id=\"quanitity\"\n                            fullWidth\n                            onChange={(e) => setQuantity(e.target.value)}\n                            value={quantity}\n                          >\n                            {[...Array(product.quantity).keys()].map((x) => (\n                              <MenuItem key={x + 1} value={x + 1}>\n                                {x + 1}\n                              </MenuItem>\n                            ))}\n                          </Select>\n                        </Grid>\n                      </Grid>\n                    </ListItem>\n                    <ListItem>\n                      <Button\n                        type=\"button\"\n                        fullWidth\n                        variant=\"contained\"\n                        color=\"primary\"\n                        onClick={addToCartHandler}\n                      >\n                        Add to cart\n                      </Button>\n                    </ListItem>\n                  </>\n                )}\n              </List>\n            </Card>\n          </Grid>\n        </Grid>\n      </Slide>\n    </Layout>\n  );\n}\n\nexport async function getServerSideProps({ params }) {\n  const { id } = params;\n  const commerce = getCommerce();\n  const product = await commerce.products.retrieve(id, {\n    type: 'permalink',\n  });\n  return {\n    props: {\n      product,\n    },\n  };\n}\n"]},"metadata":{},"sourceType":"module"}