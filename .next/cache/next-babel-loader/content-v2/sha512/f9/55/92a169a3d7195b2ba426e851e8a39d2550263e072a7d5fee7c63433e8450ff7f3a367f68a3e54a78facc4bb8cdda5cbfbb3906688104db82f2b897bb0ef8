{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"C:/Users/thetn/OneDrive/Desktop/ecommpj/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/thetn/OneDrive/Desktop/ecommpj/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\n/* next.js head */\nimport Head from 'next/head';\nimport React, { useContext, useEffect } from 'react';\nimport AppBar from '@material-ui/core/AppBar';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Link from '@material-ui/core/Link';\nimport NextLink from 'next/link';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport Box from '@material-ui/core/Box';\nimport { theme } from '../utils/styles';\nimport { siteName } from '../utils/config';\nimport { Badge, CircularProgress } from '@material-ui/core';\nimport { useStyles } from '../utils/styles';\nimport { Store } from './Store';\nimport { CART_RETRIEVE_REQUEST, CART_RETRIEVE_SUCCESS } from '../utils/constants';\nimport getCommerce from '../utils/commerce';\nexport default function Layout(_ref) {\n  var children = _ref.children,\n      commercePublicKey = _ref.commercePublicKey,\n      _ref$title = _ref.title,\n      title = _ref$title === void 0 ? 'Coolshop' : _ref$title;\n  var classes = useStyles();\n\n  var _useContext = useContext(Store),\n      state = _useContext.state,\n      dispatch = _useContext.dispatch;\n\n  var cart = state.cart;\n  useEffect(function () {\n    var fetchCart = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var commerce, cartData;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                commerce = getCommerce(commercePublicKey);\n                dispatch({\n                  type: CART_RETRIEVE_REQUEST\n                });\n                _context.next = 4;\n                return commerce.cart.retrieve();\n\n              case 4:\n                cartData = _context.sent;\n                dispatch({\n                  type: CART_RETRIEVE_SUCCESS,\n                  payload: cartData\n                });\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function fetchCart() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    fetchCart();\n  }, []);\n  return /*#__PURE__*/_jsxs(React.Fragment, {\n    children: [/*#__PURE__*/_jsxs(Head, {\n      children: [/*#__PURE__*/_jsx(\"meta\", {\n        charSet: \"utf-8\"\n      }), /*#__PURE__*/_jsx(\"title\", {\n        children: \"\".concat(title, \" - \").concat(siteName)\n      }), /*#__PURE__*/_jsx(\"link\", {\n        rel: \"icon\",\n        href: \"/favicon.ico\"\n      }), /*#__PURE__*/_jsx(\"meta\", {\n        name: \"viewport\",\n        content: \"width=device-width, initial-scale=1, shrink-to-fit=no\"\n      })]\n    }), /*#__PURE__*/_jsxs(ThemeProvider, {\n      theme: theme,\n      children: [/*#__PURE__*/_jsx(CssBaseline, {}), /*#__PURE__*/_jsx(AppBar, {\n        position: \"static\",\n        color: \"default\",\n        elevation: 0,\n        className: classes.appBar,\n        children: /*#__PURE__*/_jsxs(Toolbar, {\n          className: classes.toolbar,\n          children: [/*#__PURE__*/_jsx(NextLink, {\n            href: \"/\",\n            children: /*#__PURE__*/_jsx(Link, {\n              variant: \"h6\",\n              color: \"inherit\",\n              noWrap: true,\n              href: \"/\",\n              className: classes.toolbarTitle,\n              children: siteName\n            })\n          }), /*#__PURE__*/_jsx(\"nav\", {\n            children: /*#__PURE__*/_jsx(NextLink, {\n              href: \"/cart\",\n              children: /*#__PURE__*/_jsx(Link, {\n                variant: \"button\",\n                color: \"textPrimary\",\n                href: \"/cart\",\n                className: classes.link,\n                children: cart.loading ? /*#__PURE__*/_jsx(CircularProgress, {}) : cart.data.total_items > 0 ? /*#__PURE__*/_jsx(Badge, {\n                  badgeContent: cart.data.total_items,\n                  color: \"primary\",\n                  children: \"Cart\"\n                }) : 'Cart'\n              })\n            })\n          })]\n        })\n      }), /*#__PURE__*/_jsx(Container, {\n        component: \"main\",\n        className: classes.main,\n        children: children\n      }), /*#__PURE__*/_jsx(Container, {\n        maxWidth: \"md\",\n        component: \"footer\",\n        children: /*#__PURE__*/_jsx(Box, {\n          mt: 5,\n          children: /*#__PURE__*/_jsxs(Typography, {\n            variant: \"body2\",\n            color: \"textSecondary\",\n            align: \"center\",\n            children: ['Â© ', siteName, \" 2021\", '.']\n          })\n        })\n      })]\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}