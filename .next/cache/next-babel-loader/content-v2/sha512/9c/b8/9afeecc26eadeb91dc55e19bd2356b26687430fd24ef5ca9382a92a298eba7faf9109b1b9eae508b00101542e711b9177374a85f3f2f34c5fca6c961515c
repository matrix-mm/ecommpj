{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\n/* next.js head */\nimport Head from 'next/head';\nimport React, { useContext, useEffect } from 'react';\nimport AppBar from '@material-ui/core/AppBar';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Link from '@material-ui/core/Link';\nimport NextLink from 'next/link';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport Box from '@material-ui/core/Box';\nimport { theme } from '../utils/styles';\nimport { siteName } from '../utils/config';\nimport { Badge, CircularProgress } from '@material-ui/core';\nimport { useStyles } from '../utils/styles';\nimport { Store } from './Store';\nimport { CART_RETRIEVE_REQUEST, CART_RETRIEVE_SUCCESS } from '../utils/constants';\nimport getCommerce from '../utils/commerce';\nexport default function Layout({\n  children,\n  commercePublicKey,\n  title = 'Coolshop'\n}) {\n  const classes = useStyles();\n  const {\n    state,\n    dispatch\n  } = useContext(Store);\n  const {\n    cart\n  } = state;\n  useEffect(() => {\n    const fetchCart = async () => {\n      const commerce = getCommerce(commercePublicKey);\n      dispatch({\n        type: CART_RETRIEVE_REQUEST\n      });\n      const cartData = await commerce.cart.retrieve();\n      dispatch({\n        type: CART_RETRIEVE_SUCCESS,\n        payload: cartData\n      });\n    };\n\n    fetchCart();\n  }, []);\n  return /*#__PURE__*/_jsxs(React.Fragment, {\n    children: [/*#__PURE__*/_jsxs(Head, {\n      children: [/*#__PURE__*/_jsx(\"meta\", {\n        charSet: \"utf-8\"\n      }), /*#__PURE__*/_jsx(\"title\", {\n        children: `${title} - ${siteName}`\n      }), /*#__PURE__*/_jsx(\"link\", {\n        rel: \"icon\",\n        href: \"/favicon.ico\"\n      }), /*#__PURE__*/_jsx(\"meta\", {\n        name: \"viewport\",\n        content: \"width=device-width, initial-scale=1, shrink-to-fit=no\"\n      })]\n    }), /*#__PURE__*/_jsxs(ThemeProvider, {\n      theme: theme,\n      children: [/*#__PURE__*/_jsx(CssBaseline, {}), /*#__PURE__*/_jsx(AppBar, {\n        position: \"static\",\n        color: \"default\",\n        elevation: 0,\n        className: classes.appBar,\n        children: /*#__PURE__*/_jsxs(Toolbar, {\n          className: classes.toolbar,\n          children: [/*#__PURE__*/_jsx(NextLink, {\n            href: \"/\",\n            children: /*#__PURE__*/_jsx(Link, {\n              variant: \"h6\",\n              color: \"inherit\",\n              noWrap: true,\n              href: \"/\",\n              className: classes.toolbarTitle,\n              children: siteName\n            })\n          }), /*#__PURE__*/_jsx(\"nav\", {\n            children: /*#__PURE__*/_jsx(NextLink, {\n              href: \"/cart\",\n              children: /*#__PURE__*/_jsx(Link, {\n                variant: \"button\",\n                color: \"textPrimary\",\n                href: \"/cart\",\n                className: classes.link,\n                children: cart.loading ? /*#__PURE__*/_jsx(CircularProgress, {}) : cart.data.total_items > 0 ? /*#__PURE__*/_jsx(Badge, {\n                  badgeContent: cart.data.total_items,\n                  color: \"primary\",\n                  children: \"Cart\"\n                }) : 'Cart'\n              })\n            })\n          })]\n        })\n      }), /*#__PURE__*/_jsx(Container, {\n        component: \"main\",\n        className: classes.main,\n        children: children\n      }), /*#__PURE__*/_jsx(Container, {\n        maxWidth: \"md\",\n        component: \"footer\",\n        children: /*#__PURE__*/_jsx(Box, {\n          mt: 5,\n          children: /*#__PURE__*/_jsxs(Typography, {\n            variant: \"body2\",\n            color: \"textSecondary\",\n            align: \"center\",\n            children: ['Â© ', siteName, \" 2021\", '.']\n          })\n        })\n      })]\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}